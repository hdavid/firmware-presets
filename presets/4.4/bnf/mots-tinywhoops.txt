#$ TITLE: mots TinyWhoops
#$ FIRMWARE_VERSION: 4.4
#$ CATEGORY: BNF
#$ STATUS: COMMUNITY
#$ KEYWORDS: Mobula 2S ELRS _mots
#$ AUTHOR: mots
#$ DISCUSSION: https://github.com/hdavid/firmware-presets
#$ DESCRIPTION:  Mobula7 1S / Trashcan 2S
#$ FORCE_OPTIONS_REVIEW: TRUE


defaults nosave
batch start

# Modes
#$ INCLUDE: presets/4.4/modes/mots.txt

# Blackbox
#$ INCLUDE: presets/4.4/other/mots-blackbox.txt

# VTX
#$ INCLUDE: presets/4.4/vtx/mots.txt

# OSD
#$ INCLUDE: presets/4.4/osd/mots.txt

# Gyro & Acc
set small_angle = 180

# RC Link
#$ OPTION_GROUP BEGIN: Receiver
    #$ OPTION BEGIN (CHECKED): SPI ELRS
        resource RX_SPI_BIND 1 B02
        feature RX_SPI
        feature -RX_SERIAL
        beacon RX_LOST
        beacon RX_SET
        set min_check = 1000
        set max_check = 2000
        set rc_smoothing_auto_factor = 45
    #$ OPTION END
    #$ OPTION BEGIN (CHECKED): SPI ELRS 500hz
        set expresslrs_rate_index = 0
        # Allowed range: 0 â€“ 4
        # Default value: 0
        # 0=500Hz,1=250Hz,2=150Hz,3=50Hz,4=25Hz
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): SPI ELRS 250hz
       set expresslrs_rate_index = 1
    #$ OPTION END
    #$ OPTION BEGIN (UNCHECKED): SPI ELRS 150hz
       set expresslrs_rate_index = 2
    #$ OPTION END
    #$ OPTION BEGIN (CHECKED): ELRS Bind Phrase: Mots
        set expresslrs_uid = 21,19,5,147,134,168
    #$ OPTION END
#$ OPTION_GROUP END

# ESC
feature -AIRMODE
feature MOTOR_STOP
set yaw_motors_reversed = ON
set dshot_bidir = ON
set dshot_bitbang = AUTO
set motor_pwm_protocol = DSHOT300
set motor_poles = 12
set beeper_dshot_beacon_tone = 3


# Battery
set bat_capacity = 550
set vbat_max_cell_voltage = 435
set vbat_min_cell_voltage = 290
set vbat_warning_cell_voltage = 310
set ibata_scale = 470
set report_cell_voltage = ON


#$ OPTION_GROUP BEGIN: Aircraft
    #$ OPTION BEGIN (CHECKED): Mobula7 2S
        set craft_name = Mobula 2S
        set pilot_name = mots
        
        #$ INCLUDE: presets/4.4/tune/mots-mobula7-2s.txt
        
        #BMI GYRO
        set gyro_1_sensor_align = DEFAULT
        #set gyro_1_sensor_align = CW0
        
        set acc_calibration = -105,16,10,1
        
    #$ OPTION END
    
    #$ OPTION BEGIN (UNCHECKED): Mobula7 1S
        set craft_name = Mobula7 1S
        set pilot_name = mots
        
        #$ INCLUDE: presets/4.4/tune/mots-mobula7-1s.txt
        
        #ECM GYRO
        set gyro_1_sensor_align = CW90
        set gyro_1_align_yaw = 900
        set pid_process_denom = 2
        
        set acc_calibration = -6,-39,2,1

    #$ OPTION END
#$ OPTION_GROUP END

# save configuration
save
