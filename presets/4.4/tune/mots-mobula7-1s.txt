#$ TITLE:  Mobula7 1s
#$ FIRMWARE_VERSION: 4.4
#$ CATEGORY: TUNE
#$ STATUS: COMMUNITY
#$ KEYWORDS: tune, pid, default, filters
#$ AUTHOR: mots

#$ DESCRIPTION: 

#$ DISCUSSION: https://github.com/betaflight/firmware-presets/pull/291


# Filters
set pid_process_denom = 1
set simplified_gyro_filter = OFF

set gyro_lpf1_static_hz = 0
set gyro_lpf2_static_hz = 0
#set gyro_lpf1_dyn_min_hz = 0
#set gyro_lpf1_dyn_max_hz = 0

set rpm_filter_harmonics = 2

#set dyn_notch_q = 500
#set dyn_notch_max_hz = 300

set gyro_lpf1_dyn_min_hz = 300
set gyro_lpf1_dyn_max_hz = 550



profile 0
set profile_name = default


profile 1
set profile_name = stock

set dterm_lpf1_static_hz = 0
set yaw_lowpass_hz = 0

set vbat_sag_compensation = 100
#set anti_gravity_gain = 4500
set iterm_relax_cutoff = 20

set feedforward_jitter_factor = 5
set feedforward_boost = 18
set feedforward_max_rate_limit = 95

set p_pitch = 116
set i_pitch = 135
set d_pitch = 77
set f_pitch = 212
set p_roll = 123
set i_roll = 143
set d_roll = 80
set f_roll = 226
set p_yaw = 123
set i_yaw = 143
set f_yaw = 226
set d_min_roll = 80
set d_min_pitch = 77
set d_max_advance = 0

set simplified_master_multiplier = 145
set simplified_i_gain = 65
set simplified_d_gain = 185
set simplified_pi_gain = 190
set simplified_dmax_gain = 0
set simplified_feedforward_gain = 130
set simplified_pitch_d_gain = 85
set simplified_pitch_pi_gain = 90

set tpa_breakpoint = 1250


profile 2
set profile_name = hri

set simplified_dterm_filter = OFF
set dterm_lpf1_type = BIQUAD
set dterm_lpf1_dyn_min_hz = 0
set dterm_lpf1_dyn_max_hz = 0
set dterm_lpf1_static_hz = 110
set dterm_lpf2_static_hz = 0
set yaw_lowpass_hz = 0


set vbat_sag_compensation = 100
#set anti_gravity_gain = 4500
set iterm_relax_cutoff = 20

set feedforward_jitter_factor = 5
set feedforward_boost = 18
set feedforward_max_rate_limit = 95

set angle_level_strength = 100
set horizon_level_strength = 100

set p_pitch = 116
set i_pitch = 135
set d_pitch = 77
set f_pitch = 212
set p_roll = 123
set i_roll = 143
set d_roll = 80
set f_roll = 226
set p_yaw = 123
set i_yaw = 143
set f_yaw = 226
set d_min_roll = 80
set d_min_pitch = 77
set d_max_advance = 0

set simplified_master_multiplier = 145
set simplified_d_gain = 160


# restore original profile selection
profile 2


rateprofile 0
set rateprofile_name = default

rateprofile 1
set rateprofile_name = stock
set rates_type = BETAFLIGHT
set roll_rc_rate = 110
set pitch_rc_rate = 110
set yaw_rc_rate = 100
set roll_srate = 75
set pitch_srate = 75
set yaw_srate = 70
set tpa_breakpoint = 1250

rateprofile 2
set rateprofile_name = hri

rateprofile 3
set rateprofile_name = unused

# restore original rateprofile selection
rateprofile 2